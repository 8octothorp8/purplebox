<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Link Finder (TMDB Input Converter)</title>
<style>
  body { font-family: sans-serif; padding: 20px; }
  input { width: 300px; padding: 5px; }
  button { padding: 6px 10px; }
  ul { margin-top: 20px; }
</style>
</head>
<body>

<h2>Link Finder</h2>

<input id="url" placeholder="Enter a URL or search term">
<button onclick="findLinks()">Search</button>

<ul id="results"></ul>

<script>
async function findLinks() {
  let input = document.getElementById("url").value.trim();
  const results = document.getElementById("results");
  results.innerHTML = "";

  // If input does NOT start with http, treat it as a TMDB search
  if (!input.startsWith("http://") && !input.startsWith("https://")) {
    const query = input.split(" ").join("+");
    input = `https://www.themoviedb.org/search?language=en-US&query=${query}`;
    document.getElementById("url").value = input; // Replace input with full URL
  }

  try {
    const proxyURL = "https://api.allorigins.win/get?url=" + encodeURIComponent(input);
    const res = await fetch(proxyURL);
    const data = await res.json();

    const parser = new DOMParser();
    const doc = parser.parseFromString(data.contents, "text/html");

    const links = [...doc.querySelectorAll("a")];

    if (links.length === 0) {
      results.innerHTML = "<li>No links found.</li>";
      return;
    }

    links.forEach(a => {
      const li = document.createElement("li");
      li.textContent = a.href;
      results.appendChild(li);
    });

  } catch (err) {
    results.innerHTML = "<li>Error fetching page.</li>";
  }
}
</script>

</body>
</html>
